# KmiDi Environment Configuration
# ============================================================================
# Copy this file to .env and customize for your environment
# Updated: 2026-01-11
#
# Quick Start:
#   cp env.example .env
#   # Edit values below
#   docker-compose up -d
#
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Application environment (development, staging, production)
ENVIRONMENT=production

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable debug mode (set to false in production)
DEBUG=false

# ============================================================================
# API SERVER CONFIGURATION
# ============================================================================

# API server host (use 0.0.0.0 for Docker, 127.0.0.1 for local dev)
API_HOST=0.0.0.0

# API server port
API_PORT=8000

# Number of worker processes (set to CPU cores for production)
API_WORKERS=4

# Enable hot reload (development only, set to false in production)
RELOAD=false

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Allowed CORS origins (comma-separated, use * for development only)
# Production example: https://kmidi.app,https://api.kmidi.app
CORS_ORIGINS=*

# ============================================================================
# RATE LIMITING
# ============================================================================

# Enable rate limiting
ENABLE_RATE_LIMITING=true

# ============================================================================
# METRICS & MONITORING
# ============================================================================

# Enable Prometheus metrics endpoint (/metrics)
ENABLE_METRICS=true

# ============================================================================
# STORAGE CONFIGURATION (REQUIRED for production)
# ============================================================================
#
# Resolution order:
#   1. KELLY_AUDIO_DATA_ROOT (explicit path, highest priority)
#   2. KELLY_SSD_PATH/kelly-audio-data (data directory mount point)
#   3. Auto-detected platform paths (local storage first, then legacy SSD mounts)
#   4. Fallback: ~/.kelly/audio-data (safe, always writable)
#
# Examples:
#   macOS:   /Users/username/RECOVERY_OPS/AUDIO_MIDI_DATA/kelly-audio-data
#   Linux:   /home/username/kelly-audio-data
#   Windows: C:\Users\username\kelly-audio-data
#   Docker:  /data (mapped via volume)

# Primary audio data directory (full path)
# REQUIRED for production - set this to avoid fallback storage
KELLY_AUDIO_DATA_ROOT=/data

# Alternative: External SSD mount point (kelly-audio-data created inside)
# Only used if KELLY_AUDIO_DATA_ROOT is not set
# macOS:   KELLY_SSD_PATH=/Volumes/Extreme SSD
# Linux:   KELLY_SSD_PATH=/mnt/ssd
# Windows: KELLY_SSD_PATH=D:\

# Output directory for generated files
OUTPUT_DIR=/output

# Models directory for ML models
MODELS_DIR=/models

# ============================================================================
# ML/TRAINING CONFIGURATION
# ============================================================================

# Default device for ML inference/training (auto, mps, cuda, cpu)
KELLY_DEVICE=auto

# Training device override (mps for Apple Silicon, cuda for NVIDIA)
TRAINING_DEVICE=auto

# Training epochs (for training jobs)
TRAINING_EPOCHS=50

# Training batch size
TRAINING_BATCH_SIZE=64

# Maximum training budget in USD (for cloud training)
KELLY_TRAINING_BUDGET=100.0

# ============================================================================
# STREAMLIT CONFIGURATION (Optional)
# ============================================================================

# Streamlit server port
STREAMLIT_SERVER_PORT=8501

# Streamlit server address
STREAMLIT_SERVER_ADDRESS=0.0.0.0

# ============================================================================
# DOCKER CONFIGURATION
# ============================================================================

# Docker image tag
DOCKER_TAG=latest

# Compose project name
COMPOSE_PROJECT_NAME=KmiDi

# ============================================================================
# EXTERNAL API KEYS (Optional integrations)
# ============================================================================

# Freesound API key for downloading audio samples
# FREESOUND_API_KEY=your_api_key_here

# OpenAI API key (for MCP swarm)
# OPENAI_API_KEY=your_api_key_here

# Anthropic API key (for MCP swarm)
# ANTHROPIC_API_KEY=your_api_key_here

# Google AI API key (for MCP swarm)
# GOOGLE_API_KEY=your_api_key_here

# ============================================================================
# LLM ONNX SERVICE (Optional)
# ============================================================================

# ONNX LLM model path
LLM_ONNX_MODEL_PATH=/models/llama3-onnx

# Maximum generation length
LLM_ONNX_MAX_LENGTH=512

# Temperature for generation
LLM_ONNX_TEMPERATURE=0.7

# ============================================================================
# KNOWLEDGE BASE ANALYZER (Optional)
# ============================================================================

# KB output directory
KB_OUTPUT_DIR=/output/knowledge_base

# Analysis mode (full, quick, incremental)
KB_ANALYSIS_MODE=full

# Output format (json, markdown, both)
KB_OUTPUT_FORMAT=both

# ============================================================================
# SECURITY SETTINGS (Production)
# ============================================================================

# Secret key for session management (generate with: openssl rand -hex 32)
# SECRET_KEY=your_secret_key_here

# Trusted hosts (comma-separated, for production)
# TRUSTED_HOSTS=api.kmidi.app,localhost

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
#
#   [ ] Set ENVIRONMENT=production
#   [ ] Set DEBUG=false
#   [ ] Configure CORS_ORIGINS with specific domains
#   [ ] Set KELLY_AUDIO_DATA_ROOT to actual path
#   [ ] Generate and set SECRET_KEY
#   [ ] Enable HTTPS via reverse proxy (nginx/traefik)
#   [ ] Set up monitoring dashboards
#
# ============================================================================
